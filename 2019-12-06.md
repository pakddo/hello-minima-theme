---
layout: post
title: "데이터 파이프 라인 구축"
---
# 데이터 파이프라인 구축
 - AWS2NCP 이관을 위하여...

## 일반적인 로그 분석 시스템
![general](https://t1.daumcdn.net/cfile/tistory/2510314D5886F3942F)
- 출처 : 조대협의 블로그 (https://bcho.tistory.com/1158)

## Action-Items
- As-Is / To-Be 상황 정리
- 진행 단계
  1. 로그 수집 방식 결정
  2. 기존 데이터 이관
    - s3 -> object storage
    - hive 만 먼저
    - 로그데이터는 이관할지 신규 데이터로만 적재할지 결정 필요
  3. 배치클러스터 설정
    - 현재 시스템에서 설치해야하는 소프트웨어 리스트 업
    - 1차 구성
      - HDP
      - hive / presto / airflow
  4. 분석클러스터 설정

## As-Is
- 구성

  항목 | 구성 기술
  --|--
  API 서버 | Ruby On Rails
  Message Q | Log-stash, AWS Kinesis Stream
  Message Consumer | AWS Kinesis Stream
  Log Storage | AWS S3
  Reporting | Tableau

- 문제점
  - 로그 수집시 log-stash 다운이 잦음
  - 배치 형태의 로그 수집 api-log / event-log
- 해결방안
  - 실시간 처리 도입 (spark-kafka)

## To-Be
- 구성

  항목 | 구성 기술
  --|--
  API 서버 | Ruby On Rails
  Message Q | Kafka Stream Producer
  Message Consumer | Kafka Consumer
  Log Storage | NCP Object Storage
  Reporting | Tableau
